name: upgrade-log4j-cve-2021-44228-gradle
description: Detects dependencies on log4j jars that are affected by [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)

# Find all repositories that use Gradle (and have build.gradle files). We intentionally don't
# restrict to only repositories whose Gradle files include log4j, because we want to fix instances
# where log4j is a transitive (indirect) dependency as well (and in those cases, there would not be
# any files mentioning log4j).
on:
  - repositoriesMatchingQuery: file:build.gradle NOT content:#upgrade-log4j-gradle-cve-2021-44228

# In each repository,
steps:
  - run: echo TODO
    container: gradle:7.3.1-jdk11

# Describe the changeset (e.g., GitHub pull request) you want for each repository.
changesetTemplate:
  title: Detected vulnerable log4j dependency (CVE-2021-44228)
  body: |
    This PR identifies jar files that are on the classpath of this codebase that are affected by [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228).
    Please urgently fix this issue by following the steps in TODO.
  branch: batches/detect-log4j-cve-2021-44228-gradle
  commit:
    message: Detect log4j vulnerability (CVE-2021-44228)
  published: false
