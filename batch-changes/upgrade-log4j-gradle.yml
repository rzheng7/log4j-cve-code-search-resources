name: upgrade-log4j-cve-2021-44228-gradle
description: Upgrades log4j to a version not affected by [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)

# Find all repositories that use Gradle. We intentionally don't restrict to only repositories whose
# Gradle files include log4j, because we want to fix instances where log4j is a transitive
# (indirect) dependency as well (and in those cases, there would not be any files mentioning log4j).
on:
  - repositoriesMatchingQuery: file:build.gradle repo:sgtest/sample-vulnerable-log4j

# In each repository,
steps:
  - run: echo hello >> hello.txt
    container: ubuntu:18.04

# Describe the changeset (e.g., GitHub pull request) you want for each repository.
changesetTemplate:
  title: Upgrade log4j dependency (CVE-2021-44228)
  body: Upgrades log4j to a version not affected by [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)
  branch: batches/upgrade-log4j-cve-2021-44228-gradle
  commit:
    message: Upgrade log4j dependency (CVE-2021-44228)
  published: false
